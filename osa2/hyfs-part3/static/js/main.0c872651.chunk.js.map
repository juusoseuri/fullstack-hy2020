{"version":3,"sources":["services/persons.js","components/Person.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","props","onSubmit","addNumber","value","newName","onChange","handleNameChange","newNumber","handleNumberChange","type","search","handleSearchChange","person","handleRemoval","name","number","onClick","Notification","message","className","Error","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSearch","showAll","setShowAll","setMessage","errorMessage","setErrorMessage","useEffect","console","log","personService","length","personsToShow","filter","toLowerCase","includes","event","target","preventDefault","map","window","confirm","find","changedPerson","returnedPerson","i","setTimeout","catch","error","numberObject","concat","url","deletedPerson","n","delete","handleRemovalOf","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0c872651.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = 'https://tranquil-atoll-86830.herokuapp.com/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => {\n    return response.data\n  })\n}\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\n\nexport default { getAll, create, update }","import React from 'react'\n\n  const Person = ({person, handleRemoval }) => {\n    return (\n      <div>\n        {person.name} {person.number} \n        <button onClick={handleRemoval}>delete</button>\n      </div>\n    )\n  }\n  \n  const PersonForm = (props) => {\n    return (\n      <div>\n        <form onSubmit={props.addNumber}>\n          <div>name: <input value={props.newName} onChange={props.handleNameChange}/></div>\n          <div>number: <input value={props.newNumber} onChange={props.handleNumberChange}/></div>\n          <div><button type=\"submit\">add</button></div>\n        </form>\n      </div>\n    )\n  }\n  \n  const Filter = (props) => {\n    return (\n      <div>\n        <form>\n          <div>filter shown with <input value={props.search} onChange={props.handleSearchChange}/></div>\n        </form>\n      </div>\n    )\n  }\n\nexport default { PersonForm, Filter, Person }","import React from 'react'\n\nconst Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"message\">\n        {message}\n      </div>\n    )\n}\n\nexport default Notification","import React from 'react'\n\nconst Error = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n  \n    return (\n      <div className=\"error\">\n        {message}\n      </div>\n    )\n}\n\nexport default Error","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Person from './components/Person'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\nimport axios from 'axios'\nimport './index.css'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ search, setNewSearch ] = useState('')\n  const [ showAll, setShowAll ] = useState(true)\n  const [ message, setMessage ] = useState(null)\n  const [ errorMessage, setErrorMessage ] = useState(null)\n  \n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response)\n      })\n  }, [])\n  console.log('render', persons.length, 'notes')\n\n  const addNumber = (event) => {\n    event.preventDefault()\n    if (persons.map(person => person.name).includes(newName)) {\n      if(window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\n        const person = persons.find(person => person.name === newName)\n        const changedPerson = { ...person, number: newNumber }\n        personService\n          .update(person.id, changedPerson)\n          .then(returnedPerson => {\n            setPersons(persons.map(i => i.id !== person.id ? i : returnedPerson))\n            setNewName('')\n            setNewNumber('')\n            setMessage(\n              `The number for ${person.name} has been changed`\n            )\n            setTimeout(() => {\n              setMessage(null)\n            }, 5000)\n          })\n          .catch(error => {\n            setErrorMessage(\n              `Information of ${person.name} has already been removed from the server`\n            )\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 5000)\n          })\n      }\n    } else {\n      const numberObject = {\n        name: newName,\n        number: newNumber\n    }\n\n      personService\n        .create(numberObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          setMessage(\n            `Added ${numberObject.name}`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    console.log(event.target.value)\n    setNewSearch(event.target.value)\n    if (event.target.value === \"\") {\n      setShowAll(true)\n    } else {\n      setShowAll(false)\n    }\n  }\n \n  const handleRemovalOf = (id) => {\n    const url = `https://tranquil-atoll-86830.herokuapp.com/api/persons/${id}`\n    const deletedPerson = persons.find(n => n.id === id)\n\n    if (window.confirm(`Delete ${deletedPerson.name}`)) {\n      axios\n        .delete(url)\n        .then(message => {\n          setMessage(\n            `${deletedPerson.name} has been deleted`\n          )\n          setTimeout(() => {\n            setMessage(null)\n          }, 5000)\n        })\n\n      setPersons(persons.filter(person => \n        person.id !== deletedPerson.id))\n      console.log(deletedPerson.id)\n    }\n  }\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter( person => person.name.toLowerCase().includes(\n      search.toLowerCase()))\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={message}/>\n      <Error message={errorMessage}/>\n\n      <Person.Filter search={search} handleSearchChange={handleSearchChange}/>\n\n      <h2>add a new</h2>\n\n      <Person.PersonForm \n        addNumber={addNumber}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n        />\n\n      <h2>Numbers</h2>\n\n      {personsToShow.map((person, i) => \n        <Person.Person\n          key={i}\n          person={person}\n          handleRemoval={() => handleRemovalOf(person.id)}/>\n      )}\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}